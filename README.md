# GitHub Issue Triage Workflow

A set of Copilot agent skills for systematic GitHub issue triage — investigating bugs, proposing fixes, tracking progress, and generating status reports across multiple repositories.

## What This Does

This workflow turns Copilot into an issue triage assistant. Point it at a GitHub repo and it will:

- **Find untriaged issues** and prioritize them
- **Diagnose bugs** — fetch issue context, reproduce locally, classify root cause
- **Propose fixes** — write code changes, run targeted tests, create fix branches
- **Track everything** — structured reports, captain's logs, investigation notes
- **Generate dashboards** — markdown summaries with status tables, PR cross-references

The system is designed for cross-repo investigation. An issue filed in one repo often has its root cause or fix in another — the workflow handles that naturally.

## Skills

| Skill | Description |
|-------|-------------|
| **add-repo** | Add a new repository to triage — clones it, sets up remotes, configures areas |
| **find-untriaged** | Find open issues that haven't been triaged yet |
| **diagnose-and-fix** | Full-loop: fetch issue → classify → reproduce → fix → test → report |
| **load-issue** | Load prior context for an issue to continue investigation interactively |
| **generate-summary** | Build a triage dashboard from all issue reports |
| **triage-status** | Quick status overview — counts, categories, fix candidates |
| **validate-fixes** | Check that fix branches still apply cleanly and pass tests |
| **bookkeeping** | Pull repo, flush in-progress notes, ensure config (runs automatically) |
| **collect-dumps** | Configure .NET crash dump collection for repro environments |
| **local-tools** | Register and resolve local tool paths (debuggers, dotnet-dump, etc.) |
| **use-local-sos** | Configure CDB to use a locally built SOS (Windows) |
| **save-ad-hoc** | Save an investigation note from the current conversation |
| **user-recent-prs** | Fetch your recent PRs across repos |

## Quick Start

### 1. Create a workspace and clone

```bash
mkdir my-triage && cd my-triage
git init
git clone git@github.com:leculver/workflow.git .agents
```

### 2. Let Copilot set up the rest

```bash
copilot -p "$(cat .agents/setup-instructions.md)"
```

This will walk you through:
- Creating the directory structure and config files
- Adding your first repository to triage
- Setting up git remotes and `.gitignore`

### 3. Start triaging

```
> find untriaged issues in dotnet/runtime
> diagnose issue #12345
> generate a summary for dotnet/runtime
```

## How It Works

### Repo Structure

The triage workspace is a private git repo that holds your investigation data. The `.agents/` directory (this repo) is cloned into it and provides the Copilot skills.

```
my-triage/                          # Your private triage repo
├── .agents/                        # ← This repo (cloned here)
│   └── skills/                     #    Copilot skill definitions
├── .github/
│   └── copilot-instructions.md     #    Tells Copilot about the workspace
├── config/
│   ├── repos.json                  #    Which repos you're triaging
│   ├── user.json                   #    Your GitHub identity (auto-generated, gitignored)
│   └── local-tools.json            #    Local tool paths (gitignored)
├── issues/
│   └── <owner>-<repo>/
│       └── <number>/
│           ├── report.json         #    Structured triage data
│           ├── report.md           #    Human-readable report
│           ├── log.md              #    Investigation captain's log
│           └── repro/              #    Reproduction scripts and artifacts
├── summaries/
│   └── <owner>-<repo>/
│       └── 2026-02-19.md           #    Generated dashboards
├── notes/                          #    Ad-hoc investigation notes
├── runtime/                        #    Local repo checkout (gitignored)
├── diagnostics/                    #    Local repo checkout (gitignored)
└── ...
```

### Fork Workflow

For org/third-party repos (e.g., `dotnet/runtime`), the `add-repo` skill sets up a fork workflow:
- **`origin`** → your fork (where fix branches are pushed)
- **`upstream`** → the canonical repo (where issues are filed)

For personal repos (e.g., `yourname/my-tool`), there's just `origin` — no fork needed.

### User Identity

Skills that need your GitHub username (e.g., filtering PRs by author) read from `config/user.json`. This file is auto-generated by the `bookkeeping` skill on first run via `gh api user` and is gitignored (machine-specific).

## Prerequisites

- [GitHub CLI](https://cli.github.com/) (`gh`) — authenticated
- [GitHub Copilot CLI](https://docs.github.com/en/copilot/github-copilot-in-the-cli)
- Git

## Example Copilot Instructions

Your triage repo's `.github/copilot-instructions.md` tells Copilot about the workspace. Here's an example:

````markdown
# Copilot Instructions

This is a work repo for investigating GitHub issues across multiple repositories.
It keeps work organized, versioned, and backed up, and enables cross-repo investigation
since many issues have root causes spanning multiple repos.

## Repo Layout

- `config/` — repo configuration (`repos.json`) and local-only machine config (`local-tools.json`, `user.json`)
- `issues/<owner>-<repo>/<number>/` — triage reports, captain's logs, repro artifacts per issue
- `summaries/<owner>-<repo>/` — generated triage dashboards
- `notes/` — ad-hoc investigation notes
- `.agents/skills/` — Copilot skills defining workflows

## Sub-Repo Checkouts (gitignored)

These are local clones of the repos being investigated. They are **not** part of this
repo — they're gitignored working copies with `origin` (user's fork) and `upstream`
(canonical repo) remotes.

When investigating an issue, follow the code across these repos freely. An issue filed
in one repo often has its root cause or fix in another.
````

## Example .gitignore

```gitignore
# In-progress investigation notes — local only, flushed by bookkeeping
.progress/

# Local config — machine-specific
config/local-tools.json
config/user.json

# Dump files
*.dmp
*.crashreport.json
dumps/

# Trace files
*.nettrace
*.etl
*.perfcollect

# .NET build artifacts
bin/
obj/
*.dll
*.exe
*.pdb
*.nupkg
*.snupkg
project.assets.json

# Python
__pycache__/
*.py[cod]
*$py.class

# C++ build artifacts
*.o
*.obj
*.lib
*.a
*.so
*.dylib

# OS junk
Thumbs.db
.DS_Store

# Editor
.vscode/
*.swp
*.swo

# Temp files
*.tmp
tmp/

# Sub-repo checkouts — add entries here as you add repos
# (the add-repo skill does this automatically)
```

## License

MIT
